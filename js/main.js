
// var my_products=[
//     {
//         id:1,
//         title:'Mobile-1',
//         price:55,
//         img:'product-1.jpg',
//          rating: "5",
//         quantity: "7",
//         category:"Moble-Phone",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has"

         
//     },

//     {
//         id:2,
//         title:'Mobile-2',
//         price:66,
//         img:'product-2.jpg',
//          rating: "5",
//             quantity: "7",
//         category:"Moble-Phone",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has"
        
//     },

//     {
//         id:3,
//         title:'Mobile-3',
//         price:77,
//         rating: "5",
//         quantity: "7",
//         img:'product-3.jpg',
//       description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has"
//         ,
//         category:"Moble-Phone"
//     },
//     {
//         id:4,
//         title:'Mobile-4',
//         price:99,
//         img:'product-4.jpg',
//         rating: "5",
//          quantity: "7",
//         category:"Moble-Phone",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",
        
//     },

//     // =============================
//     {
//         id:5,
//         title:'laptop-1',
//         price:55,
//         img:'product-8.jpg',
//         rating: "5",
//         category:"Laptop",
//          quantity: "7",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

//     },

//     {
//         id:6,
//         title:'laptop-2',
//         price:66,
//         img:'product-9.jpg',
//         rating: "5",
//         category:"Laptop",
//          quantity: "7",

//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

        
//     },

//     {
//         id:7,
//         title:'laptop-3',
//         price:77,
//         img:'product-10.jpg',
//         rating: "5",
//         category:"Laptop",
//          quantity: "7",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

//     },
//     {
//         id:8,
//         title:'laptop-4',
//         price:99,
//         img:'product-11.jpg',
//         rating: "5",
//         category:"Laptop",
//          quantity: "7",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

        
//     },
    
//     // =============== tablet===============
//     {
//         id:9,
//         title:'Tablet-1',
//         price:55,
//         img:'product-18.jpg',
//         rating: "5",
//         category:"Tablet",
//          quantity: "7",

//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

//     },

//     {
//         id:10,
//         title:'Tablet-2',
//         price:66,
//         img:'product-19.jpg',
//         rating: "5",
//         category:"Tablet",
//          quantity: "7",

//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

        
//     },

//     {
//         id:11,
//         title:'Tablet-3',
//         price:77,
//         img:'product-20.jpg',
//         rating: "5",
//         category:"Tablet",
//          quantity: "7",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

//     },
//     {
//         id:12,
//         title:'Tablet-4',
//         price:99,
//         img:'product-21.jpg',
//         rating: "5",
//         category:"Tablet",
//          quantity: "7",

//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

        
//     },
//      // =============== samrt watch===============
//      {
//         id:13,
//         title:'samert Watch-1',
//         price:55,
//         img:'product-24.jpg',
//         rating: "5",
//         category:"Samrt-Watch",
//          quantity: "7",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

//     },

//     {
//         id:14,
//         title:'samert Watch-2',
//         price:66,
//         img:'product-25.jpg',
//         rating: "5",
//         category:"Samrt-Watch",
//          quantity: "7",

//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

        
//     },

//     {
//         id:15,
//         title:'samert Watch-3',
//         price:77,
//         img:'product-26.jpg',
//        rating: "5",
//         category:"Samrt-Watch",
//          quantity: "7",

//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

//     },
//     {
//         id:16,
//         title:'samert Watch-4',
//         price:99,
//         img:'product-27.jpg',
//         rating: "5",
//         category:"Samrt-Watch",
//          quantity: "7",
//          description: "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has",

        
//     }

// ]

// =============================================
// ========= Categorie Data ===========================
// =============================================

// var my_categrie=[
//     {
//         cat_name:"Moble-Phone",
//         cat_img:"cat-1.jpg",
//         id:12
//     },

//     {
//         cat_name:"Laptop",
//         cat_img:"cat-2.jpg",
//         id:13
//     },
//     {
//         cat_name:"Tablet",
//         cat_img:"cat-3.jpg",
//         id:14
//     },
//     {
//         cat_name:"Samrt-Watch",
//         cat_img:"cat-4.jpg",
//         id:15
//     },


// ]
// ======================================================================================
// ================== store Data in storage   ===========================================
// ======================================================================================

function store_data_in_storage(name,arr_data){

          localStorage.setItem(name,JSON.stringify(arr_data))
 }

// store_data_in_storage('products',my_products)//store products

// store_data_in_storage('categories',my_categrie)//store categorie

// ======================================================================================
// ================== Get data from storage   ===========================================
// ======================================================================================

function fetch_data_from_storage(storage_get_item){
    var arr_data=localStorage.getItem(storage_get_item)

    var parse_data=JSON.parse(arr_data)

    return parse_data
}
fetch_data_from_storage('products')//fetch products 

fetch_data_from_storage('categories')//fetch categorie

// ======================================================================================
// ==============    creat product elements                     ==================================
// ======================================================================================

function creat_product_elements(ele,ele_id){

        // creat div Elements for product 
        var div_products_container=document.getElementById(ele_id)
        // div_products_container.style.display='none'

        var siglepage=document.createElement('a')

        siglepage.setAttribute('href','../pages/singleproduct.html?id='+ele.id)

        var  div_fastfood=document.createElement('div')
        div_fastfood.setAttribute("id","fastfood");
        div_fastfood.setAttribute("class","fastfood");

        var  div_all_products=document.createElement('div')
        div_all_products.setAttribute("id","all_products");
        div_all_products.setAttribute("class","all_products");

        var div_product=document.createElement('div')
        div_product.setAttribute("id","product");

        var div_product_name=document.createElement('div')
        div_product_name.setAttribute("id","product_name");

        // creat element img & ul & li 
        var ele_img=document.createElement('img')
        // ele_img.style.display='none'
        var ele_ul_pro=document.createElement('ul')
        // ele_ul_pro.style.display='none'
        var ele_li_pro=document.createElement('li')

        // creat element h6 for product name & h5 for price name 
        var ele_h_six_pro_name=document.createElement('h6')
        var ele_a_pro_name=document.createElement('a')
        var ele_h_five_pro_price=document.createElement('h5')

        // ------------------------------------------------------
        var del_price=document.createElement('del')
        var ele_h_five_pro_sale=document.createElement('h5')


        // append elements
        div_products_container.append(div_fastfood)//append first child div

        div_fastfood.append(div_all_products)// append second child div

        div_all_products.append(div_product ,div_product_name)// append third & fourth child div

        div_product.append(siglepage,ele_ul_pro)// append element img & ul in child div product

        div_product_name.append(ele_h_six_pro_name ,del_price,ele_h_five_pro_price ,ele_h_five_pro_sale)

        ele_ul_pro.append(ele_li_pro)
    
        ele_h_six_pro_name.append(ele_a_pro_name)

        ele_h_six_pro_name.append(ele_a_pro_name)

        siglepage.append(ele_img)
        
         ele_li_pro.innerHTML=`<i onclick='add_to_cart(${ele.id})' class="fa fa-shopping-cart shoppingCart "></i>`
    
        ele_a_pro_name.innerText=ele.title

        if(ele.sale>0){
            del_price.append(ele_h_five_pro_price)
            ele_h_five_pro_price.innerText='$ '+ele.price
            ele_h_five_pro_sale.innerText='$ '+ele.sale

        }else{
            ele_h_five_pro_price.innerText='$ '+ele.price
        }
        
        ele_h_five_pro_price.innerText='$ '+ele.price
        ele_img.setAttribute("src",ele.img);
 
}

// ======================================================================================
// ================== show Data to user page  ===========================================
// ======================================================================================

function show_products_data(products_data ,id){
    
    var div_products_container =document.getElementById(id)
        
    div_products_container.innerHTML=''

            var pro_data=fetch_data_from_storage(products_data)||[]

            pro_data.forEach(elett=>{
                creat_product_elements(elett,'products_container')
            })


}//end function
show_products_data('products', 'products_container')
// show_products_data('products', 'productsContainerBySale')

// ==========================================================================

// ======================================================================================
// ==============   creat categorie name list elements    ==================================
// ======================================================================================
var ele_li;
function creat_categorie_list_elements(ele) {
                var cat_list=document.getElementById('cat_list')//get element ul
    ele_li = document.createElement('li')
    ele_li.innerHTML=`<li onclick=filter_product("${ele.categoryName}")>${ele.categoryName}</li>`       
    cat_list.append(ele_li)
                  
}
// ======================================================================================
// ==============    show categorie Data                    ==================================
// ======================================================================================
function show_categorie_data(categorie_data){
    
    categorie_data.forEach(ele=> creat_categorie_list_elements(ele) )
                                    
}//end function
show_categorie_data(fetch_data_from_storage('categories'))

// ======================================================================================
// ==============   filter products by categorie Name                     ==================================
// ======================================================================================

function filter_product(categoryName) { 
    
    var div_products_container=document.getElementById('products_container')
    div_products_container.innerHTML=''

    var products = fetch_data_from_storage('products')
    
    var filterdProduct = products.filter(product => product.category == categoryName)

    filterdProduct.forEach(product=>{creat_product_elements(product,'products_container')})
           
}

// ======================================== Sale Data ==================================
function sale_products() { 
    
    // var div_products_container=document.getElementById('productsContainerBySale')
    // div_products_container.innerHTML=''

    var products = fetch_data_from_storage('products')
    
    var saleProduct = products.filter(product => product.sale > 0)

    saleProduct.forEach(product=>{creat_product_elements(product,'productsContainerBySale')})
   
}
sale_products()

// =====================================================================================
                // Featured Product 
// =============================================================================================
function fetuar_products() { 
    
    var products = fetch_data_from_storage('products')
    
    var fetureProduct = products.filter(product =>product.feature >0)
            
    fetureProduct.forEach(product=>{creat_product_elements(product,'productsContainerByFeatured')})

}
fetuar_products()

// ======================================================================================
// ==============    Add to cart             ==================================
// ======================================================================================

function add_to_cart(pr_id){

    if(getCookie('userToken')||getAdminTokenCookie())
        {

        var products = fetch_data_from_storage('products')
        var qty=1;
        var productCart;
        let pro_duct=products.forEach(product => {

            if (product.id == pr_id) {
                productCart={
                    quntity:qty,
                    pro_id:product.id,
                    pro_name:product.title,
                    pro_img:product.img,
                    pro_price:product.price

                    }
            }
      
        });

        var stored_cart_data=fetch_data_from_storage('carts')||[]
        stored_cart_data.push(productCart)
        store_data_in_storage('carts',stored_cart_data)
                       
    } else{
        location.href = './login.html'
    }        
    }

// ======================================================================================
// ==============       get cookie                 ==================================
// ======================================================================================
function getCookie(name) {
    var nameEQ = name + "=";

    var ca = document.cookie.split(';');

    for(var i=0;i < ca.length;i++) {

        var c = ca[i];

        while (c.charAt(0)==' ') c = c.substring(1,c.length);

        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
        
    }
    return null;
}

// ======================================================================================
// ==============     Slider      ==================================
// ======================================================================================

var image =  ['/imgs/banar/index.jpg','/imgs/banar/slid3.jpg','/imgs/banar/slid4.jpg'];
var myImg =document.getElementById('slider').querySelector('img')
var i = 0;
myImg.setAttribute('src', image[i]);
  
  function next()
  {
   i++
   if(i>image.length-1){
    i=0
   }
   myImg.setAttribute('src', image[i]);
  }

  function pre()
  {
   i--
   if(i<0){
    i=image.length-1
   }
   myImg.setAttribute('src', image[i]);
  }

  setInterval(pre, 3000);
 
// =================================================================
// ========== Search  
// =====================================================================
// var result;
// function searchInProducts() {

//   let searchinput = document.getElementById("search");
//   var inputString=searchinput.value;
//   let searchedproducts = fetch_data_from_storage("products");

//   console.log(inputString);
//   console.log(searchedproducts);

  
//    result = searchedproducts.filter((product) => { 
//                  return  product.title.startsWith(inputString)
//             });
 
//   window.localStorage.setItem('search',JSON.stringify(result))

//   window.location.href='searchproducts.html'
// }

// console.log(result);



function searchPage(){


let searchinput = document.getElementById("search");
var inputString=searchinput.value;
console.log(inputString);

  window.localStorage.setItem('search',JSON.stringify(inputString))
   
    window.location.href='searchproducts.html'
}


// searchInProducts() 